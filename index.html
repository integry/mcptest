<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP HTTP Stream Transport Tester</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container-fluid">
        <header class="bg-dark text-white p-3 mb-3">
            <h1>MCP HTTP Stream Transport Tester</h1>
            <p class="mb-0">Test your Model Context Protocol (MCP) server with HTTP Stream Transport</p>
        </header>

        <div class="row">
            <!-- Left Panel: Connection and Tools -->
            <div class="col-md-4">
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>Server Connection</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="serverUrl" class="form-label">MCP Server URL</label>
                            <input type="text" class="form-control" id="serverUrl" placeholder="http://localhost:3033">
                            <div class="form-text">Base URL of your MCP server (without '/mcp' endpoint)</div>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <button id="connectBtn" class="btn btn-primary">Connect</button>
                            <button id="disconnectBtn" class="btn btn-secondary" disabled>Disconnect</button>
                            <span id="connectionStatus" class="badge bg-secondary align-self-center">Disconnected</span>
                        </div>
                        <div class="alert alert-info">
                            <small>
                                <strong>HTTP Stream Transport:</strong> Connects to <code>/mcp</code> endpoint using JSON-RPC 2.0 protocol.
                                Uses session management via <code>Mcp-Session-Id</code> header.
                            </small>
                        </div>
                    </div>
                </div>

                <div class="card mb-3">
                    <div class="card-header d-flex justify-content-between">
                        <h5>Available Tools</h5>
                        <button id="listToolsBtn" class="btn btn-sm btn-outline-primary" disabled>List Available Tools</button>
                    </div>
                    <div class="card-body p-0">
                        <ul id="toolsList" class="list-group list-group-flush">
                            <li class="list-group-item text-muted">Connect to server to list tools</li>
                        </ul>
                    </div>
                </div>

                <div class="card mb-3">
                    <div class="card-header d-flex justify-content-between">
                        <h5>Available Resources</h5>
                        <button id="listResourcesBtn" class="btn btn-sm btn-outline-primary" disabled>List Resources</button>
                    </div>
                    <div class="card-body p-0">
                        <ul id="resourcesList" class="list-group list-group-flush">
                            <li class="list-group-item text-muted">Connect to server to list resources</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Middle Panel: Tool Parameters -->
            <div class="col-md-4">
                <div class="card mb-3">
                    <div class="card-header">
                        <h5>Tool Parameters</h5>
                    </div>
                    <div class="card-body">
                        <div id="toolParams">
                            <p class="text-muted">Select a tool to see its parameters</p>
                        </div>
                        <button id="executeToolBtn" class="btn btn-success w-100" disabled>Execute Tool</button>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Response Area -->
            <div class="col-md-4">
                <div class="card mb-3">
                    <div class="card-header d-flex justify-content-between">
                        <h5>Server Responses</h5>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="autoScrollSwitch" checked>
                            <label class="form-check-label" for="autoScrollSwitch">Auto-scroll</label>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div id="responseArea" class="response-area"></div>
                    </div>
                    <div class="card-footer">
                        <button id="clearResponseBtn" class="btn btn-sm btn-outline-secondary">Clear</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Protocol Information -->
        <div class="row mt-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>HTTP Stream Transport Protocol Information</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <h6>Endpoints</h6>
                                <ul class="list-unstyled">
                                    <li><code>/mcp</code> - Single endpoint for all MCP communication</li>
                                </ul>
                                <h6>HTTP Methods</h6>
                                <ul class="list-unstyled">
                                    <li><code>POST</code> - For sending requests</li>
                                    <li><code>GET</code> - For establishing SSE streams</li>
                                    <li><code>DELETE</code> - For terminating sessions</li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6>Headers</h6>
                                <ul class="list-unstyled">
                                    <li><code>Content-Type: application/json</code></li>
                                    <li><code>Accept: application/json, text/event-stream</code></li>
                                    <li><code>Mcp-Session-Id</code> - Session management</li>
                                    <li><code>Last-Event-ID</code> - Stream resumability</li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6>Response Modes</h6>
                                <ul class="list-unstyled">
                                    <li><code>batch</code> - JSON responses</li>
                                    <li><code>stream</code> - SSE streaming responses</li>
                                </ul>
                                <h6>JSON-RPC Methods</h6>
                                <ul class="list-unstyled">
                                    <li><code>initialize</code> - Initialize session</li>
                                    <li><code>list_tools</code> - Get available tools</li>
                                    <li><code>execute_tool</code> - Execute a tool</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
